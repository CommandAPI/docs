---
order: 1
authors:
  - JorelAli
  - willkroboth
  - DerEchtePilz
---

# Internal CommandAPI

The CommandAPI does a lot of stuff "behind the scenes". This internal CommandAPI section will go into detail about what the CommandAPI does, how it's implemented and why it has been implemented like that.

## Argument identifiers

The CommandAPI's arguments are representations of the different arguments that the Minecraft Command Data protocol handles. These are outlined in the table below:

| Identifier                     | CommandAPI argument                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `brigadier:bool`               | [`BooleanArgument`](../create-commands/arguments/types/primitive-arguments#boolean-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `brigadier:double`             | [`DoubleArgument`](../create-commands/arguments/types/primitive-arguments#numerical-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `brigadier:float`              | [`FloatArgument`](../create-commands/arguments/types/primitive-arguments#numerical-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `brigadier:integer`            | [`IntegerArgument`](../create-commands/arguments/types/primitive-arguments#numerical-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `brigadier:long`               | [`LongArgument`](../create-commands/arguments/types/primitive-arguments#numerical-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `brigadier:string`             | [`StringArgument`](../create-commands/arguments/types/string-arguments#string-argument)<br />[`TextArgument`](../create-commands/arguments/types/string-arguments#text-argument)<br />[`GreedyStringArgument`](../create-commands/arguments/types/string-arguments#greedy-string-argument)<br />[`CustomArgument<T>`](../create-commands/arguments/types/custom-arguments)                                                                                                                                                                                                                                       |
| `minecraft:angle`              | [`AngleArgument`](../create-commands/arguments/types/misc/angle-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `minecraft:block_pos`          | [`LocationArgument`](../create-commands/arguments/types/position/location-arguments#2d-location)<br />(`LocationType.BLOCK_POSITION`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `minecraft:block_predicate`    | [`BlockPredicateArgument`](../create-commands/arguments/types/predicate/block-predicate-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `minecraft:block_state`        | [`BlockStateArgument`](../create-commands/arguments/types/misc/blockstate-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `minecraft:color`              | [`ChatColorArgument`](../create-commands/arguments/types/chat/spigot-chat-arguments#chat-color-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `minecraft:column_pos`         | [`Location2DArgument`](../create-commands/arguments/types/position/location-arguments#3d-location) <br />(`LocationType.BLOCK_POSITION`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `minecraft:component`          | [`ChatComponentArgument`](../create-commands/arguments/types/chat/spigot-chat-arguments#chat-component-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `minecraft:dimension`          | [`WorldArgument`](../create-commands/arguments/types/misc/world-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `minecraft:entity`             | [`EntitySelectorArgument`](../create-commands/arguments/types/entities-arguments#entity-selector-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `minecraft:entity_anchor`      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `minecraft:entity_summon`      | [`EntityTypeArgument`](../create-commands/arguments/types/entities-arguments#entity-type-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `minecraft:float_range`        | [`DoubleRangeArgument`](../create-commands/arguments/types/ranged-arguments#the-integer-range-and-double-range-class)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `minecraft:function`           | [`FunctionArgument`](../create-commands/functions-and-tags/function-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `minecraft:game_profile`       | [`PlayerProfileArgument`](../create-commands/arguments/types/entities-arguments#playerprofile-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `minecraft:int_range`          | [`IntegerRangeArgument`](../create-commands/arguments/types/ranged-arguments#the-integer-range-and-double-range-class)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `minecraft:item_enchantment`   | [`EnchantmentArgument`](../create-commands/arguments/types/misc/enchantment-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `minecraft:item_predicate`     | [`ItemStackPredicateArgument`](../create-commands/arguments/types/predicate/itemstack-predicate-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `minecraft:item_slot`          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `minecraft:item_stack`         | [`ItemStackArgument`](../create-commands/arguments/types/misc/itemstack-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `minecraft:message`            | [`ChatArgument`](../create-commands/arguments/types/chat/spigot-chat-arguments#chat-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `minecraft:mob_effect`         | [`PotionEffectArgument`](../create-commands/arguments/types/misc/potion-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `minecraft:nbt`                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `minecraft:nbt_compound_tag`   | [`NBTCompoundArgument`](../create-commands/arguments/types/nbt-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `minecraft:nbt_path`           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `minecraft:nbt_tag`            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `minecraft:objective`          | [`ObjectiveArgument`](../create-commands/arguments/types/scoreboard/objective-arguments#objective-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `minecraft:objective_criteria` | [`ObjectiveCriteriaArgument`](../create-commands/arguments/types/scoreboard/objective-arguments#objective-criteria-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `minecraft:operation`          | [`MathOperationArgument`](../create-commands/arguments/types/misc/mathoperation-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `minecraft:particle`           | [`ParticleArgument`](../create-commands/arguments/types/misc/particle-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `minecraft:resource_location`  | [`AdvancementArgument`](../create-commands/arguments/types/misc/advancement-arguments)<br />[`BiomeArgument`](../create-commands/arguments/types/misc/biome-arguments)<br />[`CustomArgument<T>`](../create-commands/arguments/types/custom-arguments)<br />[`LootTableArgument`](../create-commands/arguments/types/misc/loottable-arguments)<br />[`NamespacedKeyArgument`](../create-commands/arguments/types/misc/namespacedkey-arguments)<br />[`RecipeArgument`](../create-commands/arguments/types/misc/recipe-arguments)<br />[`SoundArgument`](../create-commands/arguments/types/misc/sound-arguments) |
| `minecraft:rotation`           | [`RotationArgument`](../create-commands/arguments/types/position/rotation-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `minecraft:score_holder`       | [`ScoreHolderArgument`](../create-commands/arguments/types/scoreboard/scoreboard-arguments#score-holder-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `minecraft:scoreboard_slot`    | [`ScoreboardSlotArgument`](../create-commands/arguments/types/scoreboard/scoreboard-arguments#scoreboard-slot-argument)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `minecraft:swizzle`            | [`AxisArgument`](../create-commands/arguments/types/position/axis-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `minecraft:team`               | [`TeamArgument`](../create-commands/arguments/types/scoreboard/team-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `minecraft:time`               | [`TimeArgument`](../create-commands/arguments/types/misc/time-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `minecraft:uuid`               | [`UUIDArgument`](../create-commands/arguments/types/misc/uuid-arguments)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `minecraft:vec2`               | [`Location2DArgument`](../create-commands/arguments/types/position/location-arguments#2d-location)<br />(`LocationType.PRECISE_POSITION`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `minecraft:vec3`               | [`LocationArgument`](../create-commands/arguments/types/position/location-arguments#3d-location)<br />(`LocationType.PRECISE_POSITION`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

There are a few arguments that aren't implemented. Here's why:

- `minecraft:entity_anchor` - This argument only has two values: `eyes` and `feet`. It's incredibly unnecessary for any other purpose and is easier to implement with a `MultiLiteralArgument`.
- `minecraft:item_slot` - Bukkit's implementation of item slot numbers differs very wildly to Minecraft's implementation of item slot numbers. This difference makes it near-impossible to have a suitable middle-ground for item slot numbers that ensures that invalid numbers cannot be passed to the wrong inventory type. An implementation of this would require a rewrite of the current system to maintain proper inventory slot access safety.
- `minecraft:nbt`, `minecraft:nbt_path`, `minecraft:nbt_tag` - You've got the `NBTCompoundArgument`, that's good enough, right? ¯\\\_(ツ)\_/¯

## Reloading datapacks

During the initialization of Minecraft 1.16+ servers, the CommandAPI uses a custom datapack reloading sequence as opposed to the normal Vanilla Minecraft datapack reloading method. The CommandAPI's method uses the server's current command dispatcher object as opposed to a new one, which allows datapacks to use commands registered by the CommandAPI. This can be invoked using the following method:

```java
CommandAPI.reloadDatapacks();
```

## Getting a list of registered commands

The CommandAPI doesn't store the `CommandAPICommand` objects during the main running of the server because it simply doesn't need to. Instead, it stores a list of `RegisteredCommand` objects which are defined as the following, which should be fairly self-explanatory:

```java
public record RegisteredCommand {
    String commandName();
    List<String> argsAsStr();
    Optional<String> shortDescription();
    Optional<String> fullDescription();
    Optional<String[]> usageDescription();
    String[] aliases();
    CommandPermission permission();
}
```

The `argsAsStr()` method returns a list of arguments in a string format, of the form `argName:SimpleClassName`, where `argName` is the name of the argument (the argument's node name) and `SimpleClassName` is the name of the argument class that was used to construct it (such as `IntegerArgument`).

A `List<RegisteredCommand>` can be acquired using the following method:

```java
CommandAPI.getRegisteredCommands();
```

:::info

Note that this list does not update when commands are _unregistered_, only when commands are registered.

:::